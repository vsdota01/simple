<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script src="../js/rrweb.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var events = [];
			rrweb.record({
				emit(event) {
					// 用任意方式存储 event
					console.log(event);
					events.push(event);     
				},
			});
			// save 函数用于将 events 发送至后端存入，并重置 events 数组
			function save() {
			    if(events.length == 0){return;}
			    var body = JSON.stringify({ events });
					console.log(body)
			    events = [];
					
			    // $.ajax({
			    //     type: "POST",
			    //     url: "http://192.168.0.198:8067/index.php?s=v1/webtools", //访问的链接
			    //     dataType: 'text',
			    //     data:{
			    //         token:"token_xxx",
			    //         motion:body
			    //     },
			    //     success:function(res){  //成功的回调函数
			    //         var data = JSON.parse(res);
			    //         console.log(data.code);
			    //     },
			    //     error: function (e) {
			    //     }
			    // });      
			}
			// 每 10 秒调用一次 save 方法，避免请求过多
			setInterval(save, 10 * 1000);
		</script>
	</head>
	<body>
	</body>
</html>
